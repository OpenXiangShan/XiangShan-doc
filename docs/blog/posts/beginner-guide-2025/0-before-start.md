---
slug: "memory-access-827-0-before-start"
date: 2025-10-30
categories:
  - "2025 香山入门指南"
links:
  - blog/posts/beginner-guide-2025/0-before-start.md
  - blog/posts/beginner-guide-2025/1-ooo-memory-access.md
  - blog/posts/beginner-guide-2025/2-memory-access-pipeline.md
  - blog/posts/beginner-guide-2025/3-powerful-cache.md
  - blog/posts/beginner-guide-2025/4-virtual-memory.md
  - blog/posts/beginner-guide-2025/5-atomic-operation.md
---

# 【2025 香山入门指南 · 我在 827 做访存】（零）写在前面

在“2025 香山入门指南”系列文章中，我们希望构建一个基于 2025 年 6 月昆明湖 V2 版本的香山（XiangShan，提交哈希为 6318236）上手指南，通过一系列引导性的入门指南，来引导新同学们学习、了解并最终掌握香山。

827 是昆明湖项目访存组的主要办公室，“我在 827 做访存”系列以此为题介绍香山访存部分的设计。

<!-- more -->

## 写在前面

编者希望，**<font style="color:#AD1A2B;">让读者掌握学习未知知识、解决困难问题的系统的能力</font>**，而不是局限于某个 RTL 模块，某行 RTL 代码。局限在代码本身的意思是十分狭隘的，代码随时会产生变化，大家的设计也随时会产生变化。如果编者依照代码本身进行解读，哪对于不同时期的读者来说是十分困惑的：因为不同事情的代码本身肯定是不一样的，甚至我们可能会进行大规模的重构。编者不可能将所有代码的更改都反应到这篇指南中。

而掌握系统的能力，对于大部分想要了解并参与系统相关工作的读者来说至关重要的。只要你是立志于得到更高的提升，就不要把自己放在编写、了解 RTL 这么浅显直观的工作上来。

所谓系统的能力，每个人的理解都是不同的，这个系统中包含哪些领域，对于不同行业不同岗位的人来说也是不定的，编者在这里无法给出一个确切的要求，这要是要留给不同领域的读者去探索的。但是我们可以得到一个基本的共识，那就是**可以独立的解决一个涉及多个相关领域的复杂问题**。编者殷切的希望，读者可以通过阅读这篇文章，不只是了解访存相关知识，而是**<font style="color:#AD1A2B;">掌握这么一个学习并解决问题的方式，不管是日常生活还是其他不相干的领域</font>**。

本文预计会通过以下方式来构建这么一套体系：

1. **<font style="background-color:#D8DAD9;">访存是什么</font>**
2. **<font style="background-color:#D8DAD9;">访存的目的是什么</font>**
3. **<font style="background-color:#D8DAD9;">如何实现访存</font>**
4. **<font style="background-color:#D8DAD9;">更快更好的访存</font>**
5. **<font style="color:#AD1A2B;background-color:#D8DAD9;">掌握系统的学习系统知识并解决问题的能力。</font>**



本文不会深入代码细节，也不会将问题的答案给出，请同学们在后面的阅读时牢记：  
**<font style="color:#AD1A2B;background-color:#E8F7CF;">本文旨在通过引导的方式，来让同学们自发的去探索并掌握访存的世界。</font>**

### 文中问题

考虑到大家对于未来开发规划与基础知识的差异，本文设立了**多种多样不同层次的问题**，这其中：

---

**<font style="color:#DF2A3F;">这样的红色的标题是必答题：</font>**

**所有的问题都是采用这样的方式提问，并可能会附上参考链接与资料**

---

---

**<font style="color:#74B602;">这样的绿色的标题是访存相关选答题：</font>**

**这些问题存在一定的难度，如果你是立志于了解并参与访存的工作，那你可以选择这些回答这些问题。**

---

---

**<font style="color:#ECAA04;">这样的黄色的标题是非访存相关的选答题：</font>**

**这些问题存在一定的难度，并且可能和昆明湖的访存部分不是很相关，如果你立志于扩展视野，那你可以选择回答这些问题。**

---

### 题外话

此外，我们还编写了一些**“题外话”**，这些题外话会以下面这样的信息表现：


!!! note "蓝色扩展话题"
    蓝色的扩展话题一般会和处理器开发、香山实际情况贴合在一起，主要是编者想为自己的表达欲提供一个不那么正式、严谨的空间来进行发挥。

    读者可以直接无视这些蓝色扩展话题的内容，但如果你想和编者产生一些思想碰撞，那么也很欢迎读者了解这些内容。


!!! warning "黄色引用说明"
    本文势必会涉及到对于其他文章内容的大量引用，因此当大段引用出现时，会以黄色框的形式出现，并附以编者的一些个人理解。


!!! danger "红色重要提示"
    红色框的内容是一些重要的提示，你不应该错过这些。


## 什么是访存
访存，访问内存，access memory。

从名字来看，所谓访存就是访问内存，无论是读还是写。

但是显然，**在现代处理器的中，绝大部分情况下访存指令并不是直接去访问内存，而是会先与 Cache 交互，由 Cache 决定是否需要访问内存。**

而对于香山来说，自然也是这样的。

在目前的普遍认知中，访存的模块被我们称呼为 MemBlock。

MemBlock 主要作为访存顶层的模块，其中例化了真正支撑访存操作的模块，包括但不限于：

+ 访存流水线 Load/Store Unit
+ 访存队列 Load/Store Queue
+ 数据缓存 DCache
+ MMU 与 TLB
+ 向量访存控制模块
+ 非对齐访存控制模块
+ 原子访存模块
+ 写缓冲 Store Buffer

---

![MemBlock 架构图](images/MemBlock_架构图_4551fa68.svg)



因此，对于尝试上手 MemBlock 的同学们来说，了解 MemBlock 中的所有模块，并掌握其他与你有关的模块就是后面的重点了。

---

**<font style="color:#DF2A3F;">请思考并回答：</font>**

**在昆明湖 V2 中，访存是什么？为什么我们需要乱序访存？**

---

考虑到现代处理器为访存行为进行的各种优化，对于访存系统来说，一条访存指令往往并不需要直接访问内存，甚至也不一定要访问 Cache。但无论如何，访存指令总是会从一个统一的内存系统中访问指定的内容。这个内存就是我们下面要介绍的内容了，但无论如何，**访存，并不等于直接访问内存**。

